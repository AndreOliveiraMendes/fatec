{% extends "base-fixed" %}
{% from "macros/form.html" import generate_navigation_database %}
{% block title %}
    wiki - Banco de Dados
{% endblock title %}
{% block extra_css %}
    <link href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-tomorrow.css"
          rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.css"
          rel="stylesheet" />
{% endblock extra_css %}
{% block extra_script %}
    <script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-markdown.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        function copyToClipboard(id) {
            var text = document.getElementById(id).innerText;
            navigator.clipboard.writeText(text)
                .then(() => alert("Copiado!"))
                .catch(err => console.error("Erro ao copiar:", err));
        }
    </script>
{% endblock extra_script %}
{% block content %}
    <pre class="line-numbers" id="wikicode">
<code class="language-markdown"># ğŸ“š DocumentaÃ§Ã£o do Banco de Dados
{% for table in tables %}
---

## ğŸ—‚ï¸ Tabela: `{{ table }}`

| Coluna | Tipo | RestriÃ§Ãµes | default |
| --- | --- | --- | --- |
{%- for column in columns[table] %}
| {{ column['coluna'] }} | {{ column['tipo'] }} | {{ column['restriÃ§Ã£o'] }} | {{ column['default'] }} |
{%- endfor %}

**Primary Key**:
* `({{ ', '.join(pks[table]['constrained_columns']) }})`
{%- if uks[table] %}

**Unique Key**:
{%- for uk in uks[table] %}
* `({{ ', '.join(uk['column_names']) }})`
{%- endfor %}
{%- endif %}
{%- if fks[table] %}

**Foreign Key**:
{%- for fk in fks[table] %}
* `{{ ', '.join(fk['constrained_columns']) }}` â†’ `{{ fk['referred_table'] }}.{{ ', '.join(fk['referred_columns']) }}`
{%- endfor %}
{%- endif %}
{%- if inds[table] %}

**Indexes:**:
{%- for ind in inds[table] %}
* `({{ ', '.join(ind['column_names']) }})`
{%- endfor %}
{%- endif %}
{%- if chks[table] %}

**Check Constraint**:
{%- for chk in chks[table] %}
* `{{ chk['name'] }}`:
  * {{ chk['sqltext'][1:-1] }}
{%- endfor %}
{%- endif %}
{% endfor %}
## âœ… ğŸ“Œ ObservaÃ§Ãµes gerais
* âœ… Engine: InnoDB
* âœ… Charset: utf8mb4
* âœ… Collation: utf8mb4_0900_ai_ci (or utf8mb4_general_ci for mysql 5.7)
</code>
    </pre>
    <button onclick="copyToClipboard('wikicode')">Copiar</button>
{% endblock content %}