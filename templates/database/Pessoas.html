{% extends "base" %}

{% block title %}Usuarios{% endblock %}

{% block content %}
<div class="container">
  <div class="form-group btn-group">
    <a href="{{ url_for('home') }}" class="btn btn-primary btn-lg">Voltar à página de início</a>
    <a href="{{ url_for('gerenciar_menu') }}" class="btn btn-primary btn-lg">Voltar à página de admin</a>
  </div>
</div>
{{ generate_head(url_for("gerenciar_pessoas"), acao) }}
  {% if acao == 'abertura' %}
  <h3>Gerenciamento da Tabela <strong>Usuários</strong></h3>
  <p>A tabela <code>usuarios</code> possui os seguintes campos:</p>

  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr class="info">
        <th>Campo</th>
        <th>Descrição</th>
      </tr>
    </thead>
    <tbody>
      {% for campo, descricao in [
        ('id_pessoa', 'Identificador da pessoa'),
        ('nome_pessoa', 'Nome da pessoa'),
        ('email_pessoa', 'Email da pessoa')
      ] %}
      <tr>
        <td><code>{{ campo }}</code></td>
        <td>{{ descricao }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% elif acao == 'listar' %}
  <h3>Lista de Usuários</h3>
  <table class="table table-bordered table-striped table-hover">
    <thead class="info">
      <tr>
        <th>Id Pessoa</th>
        <th>Nome</th>
        <th>Email</th>
        <th>acao</th>
      </tr>
    </thead>
    <tbody>
      {% for u in pessoas %}
      <tr>
        <td>{{ u.id_pessoa }}</td>
        <td>{{ u.nome_pessoa }}</td>
        <td>{{ u.email_pessoa }}</td>
        <td>
          <form method="post" class="form-inline">
            <input type="hidden" name="bloco" value="0">
            <input type="hidden" name="id_usuario" value="{{ u.id_usuario }}">
            <button type="submit" name="acao" value="editar" class="btn btn-warning btn-sm" title="Editar">
              <i class="bi bi-pencil"></i>
            </button>
            <button type="submit" name="acao" value="excluir" class="btn btn-danger btn-sm" title="Excluir">
              <i class="bi bi-trash"></i>
            </button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% elif acao == 'procurar' %}
  {% if bloco == 0 %}
  <form class="form-group" role="form" action={{ url_for("gerenciar_usuarios") }} method="post">
    <input type="hidden" name="acao" value={{ acao }}>
    <input type="hidden" name="bloco" value="1">

  </form>
  {% else %}
  {% endif %}
  {% elif acao == 'inserir' %}
  {% elif acao == 'editar' %}
  {% elif acao == 'excluir' %}
  {% else %}
  <div class="alert alert-danger" role="alert">
    acao não definida
  </div>
  {% endif %}
</div>
{% endblock %}