{% extends "base" %}

{% block title %}Usuarios{% endblock %}

{% block content %}

  {{ generate_navigation() }}
  
  {{ generate_head(url_for("gerenciar_usuarios"), acao) }}

  {% if acao == 'abertura' %}
  <h3>Gerenciamento da Tabela <strong>Usuários</strong></h3>
  <p>A tabela <code>usuarios</code> possui os seguintes campos:</p>

  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr class="info">
        <th>Campo</th>
        <th>Descrição</th>
      </tr>
    </thead>
    <tbody>
      {% for campo, descricao in [
      ('id_usuario', 'Identificador do usuário'),
      ('id_pessoa', 'Identificador da pessoa'),
      ('tipo_pessoa', 'Tipo: externo ou funcionário'),
      ('situacao_pessoa', 'Situação: ativa ou desativada'),
      ('grupo_pessoa', 'Cargo específico: docente, etc.')
      ] %}
      <tr>
        <td><code>{{ campo }}</code></td>
        <td>{{ descricao }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% elif acao == 'listar' %}
  <h3>Lista de Usuários</h3>
  <table class="table table-bordered table-striped table-hover">
    <thead class="info">
      <tr>
        <th>ID Usuario</th>
        <th>Id Pessoa</th>
        <th>Tipo</th>
        <th>Situação</th>
        <th>Grupo</th>
        <th>Ação</th>
      </tr>
    </thead>
    <tbody>
      {% for u in usarios %}
      <tr>
        <td>{{ u.id_usuario }}</td>
        <td>{{ u.id_pessoa }}</td>
        <td>{{ u.tipo_pessoa }}</td>
        <td>{{ u.situacao_pessoa }}</td>
        <td>{{ u.grupo_pessoa }}</td>
        <td>
          <form method="post" class="form-inline">
            <input type="hidden" name="bloco" value="1">
            <input type="hidden" name="id_usuario" value="{{ u.id_usuario }}">
            <button type="submit" name="acao" value="editar" class="btn btn-warning btn-sm" title="Editar">
              <i class="bi bi-pencil"></i>
            </button>
            <button type="submit" name="acao" value="excluir" class="btn btn-danger btn-sm" title="Excluir">
              <i class="bi bi-trash"></i>
            </button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% elif acao == 'procurar' %}
  {% elif acao == 'inserir' %}
  {% elif acao == 'editar' %}
  {% elif acao == 'excluir' %}
  {% else %}
  <div class="alert alert-danger" role="alert">
    acao não definida
  </div>
  {% endif %}
</div>
{% endblock %}